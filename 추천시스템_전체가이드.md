# ì¶”ì²œ ì‹œìŠ¤í…œ ì „ì²´ ê°€ì´ë“œ

## ğŸ“Š ì‹œìŠ¤í…œ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” **4ê°€ì§€ ë¶„ì„ ë°©ë²•**ì„ í†µí•´ ë¯¸êµ­ ì£¼ì‹ ë§¤ìˆ˜/ë§¤ë„ë¥¼ ì¶”ì²œí•˜ê³ , ìë™ìœ¼ë¡œ ê±°ë˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ¯ 4ê°€ì§€ ë¶„ì„ ë°©ë²•

### 1. ğŸ“ˆ ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„ (Technical Analysis)
**íŒŒì¼**: `app/services/stock_recommendation_service.py` â†’ `generate_technical_recommendations()`

#### ë¶„ì„ ì§€í‘œ
| ì§€í‘œ | ì„¤ëª… | ë§¤ìˆ˜ ì‹ í˜¸ | ë§¤ë„ ì‹ í˜¸ |
|-----|------|----------|----------|
| **SMA (Simple Moving Average)** | ë‹¨ìˆœ ì´ë™í‰ê· ì„  | ê³¨ë“  í¬ë¡œìŠ¤ (SMA20 > SMA50) | ë°ë“œ í¬ë¡œìŠ¤ (SMA20 < SMA50) |
| **RSI (Relative Strength Index)** | ìƒëŒ€ ê°•ë„ ì§€ìˆ˜ | RSI < 50 (ê³¼ë§¤ë„) | RSI > 70 (ê³¼ë§¤ìˆ˜) |
| **MACD** | ì´ë™í‰ê·  ìˆ˜ë ´í™•ì‚° | MACD > Signal | MACD < Signal |

#### ë°ì´í„° ì €ì¥
- **í…Œì´ë¸”**: `stock_recommendations`
- **ê°±ì‹  ì£¼ê¸°**: ë§¤ì¼ ì˜¤í›„ 8ì‹œ (ë¯¸êµ­ ë™ë¶€ ì‹œê°„)
- **ëŒ€ìƒ**: 34ê°œ ë¯¸êµ­ ì£¼ì‹ (ETF ì œì™¸)

---

### 2. ğŸ¤– AI ì£¼ê°€ ì˜ˆì¸¡ (AI Prediction)
**íŒŒì¼**: `predict.py` (Jupyter/Colab), `app/services/stock_recommendation_service.py` â†’ `get_stock_recommendations()`

#### ì˜ˆì¸¡ ëª¨ë¸
- **ëª¨ë¸**: Transformer ê¸°ë°˜ ë”¥ëŸ¬ë‹ ëª¨ë¸
- **ì…ë ¥ ë°ì´í„°**: ê³¼ê±° 90ì¼ ì£¼ê°€ + 39ê°œ ê²½ì œ ì§€í‘œ
- **ì˜ˆì¸¡ ê¸°ê°„**: 14ì¼ í›„ ì£¼ê°€
- **í•™ìŠµ ë°ì´í„°**: 80% í•™ìŠµ / 20% ê²€ì¦

#### í‰ê°€ ì§€í‘œ
| ì§€í‘œ | ì„¤ëª… | ë§¤ìˆ˜ ê¸°ì¤€ |
|-----|------|----------|
| **Accuracy** | ì˜ˆì¸¡ ì •í™•ë„ (100 - MAPE) | â‰¥ 80% |
| **Rise Probability** | ìƒìŠ¹ í™•ë¥  | â‰¥ 3% |
| **MAPE** | í‰ê·  ì ˆëŒ€ ë°±ë¶„ìœ¨ ì˜¤ì°¨ | < 20% |

#### ë°ì´í„° ì €ì¥
- **ì›ë³¸ ì˜ˆì¸¡**: `predicted_stocks` (ë‚ ì§œë³„ ì˜ˆì¸¡/ì‹¤ì œ ê°€ê²©)
- **ë¶„ì„ ê²°ê³¼**: `stock_analysis_results` (í‰ê°€ ì§€í‘œ + ì¶”ì²œ)
- **ê°±ì‹  ì£¼ê¸°**: ìˆ˜ë™ ì‹¤í–‰ (ì£¼ 1íšŒ ê¶Œì¥)

---

### 3. ğŸ“° ë‰´ìŠ¤ ê°ì • ë¶„ì„ (Sentiment Analysis)
**íŒŒì¼**: `app/services/stock_recommendation_service.py` â†’ `fetch_and_store_sentiment_for_recommendations()`

#### ë°ì´í„° ì†ŒìŠ¤
- **API**: Alpha Vantage News Sentiment API
- **ë¶„ì„ ëŒ€ìƒ**: ìµœê·¼ 3ì¼ê°„ ë‰´ìŠ¤ ê¸°ì‚¬
- **ë¶„ì„ ë°©ë²•**: í‹°ì»¤ë³„ ê°ì • ì ìˆ˜ í‰ê·  ê³„ì‚°

#### ê°ì • ì ìˆ˜
| ë²”ìœ„ | ì˜ë¯¸ | ë§¤ìˆ˜/ë§¤ë„ íŒë‹¨ |
|-----|------|---------------|
| **â‰¥ 0.15** | ê¸ì •ì  | âœ… ë§¤ìˆ˜ ì‹ í˜¸ |
| **-0.15 ~ 0.15** | ì¤‘ë¦½ | âš ï¸ ê´€ë§ |
| **< -0.15** | ë¶€ì •ì  | âŒ ë§¤ë„ ì‹ í˜¸ |

#### ë°ì´í„° ì €ì¥
- **í…Œì´ë¸”**: `ticker_sentiment_analysis`
- **ê°±ì‹  ì£¼ê¸°**: ë§¤ 3ì¼ë§ˆë‹¤ ì˜¤ì „ 9ì‹œ (ë¯¸êµ­ ë™ë¶€ ì‹œê°„)
- **ëŒ€ìƒ**: ì¶”ì²œ ì£¼ì‹ + ë³´ìœ  ì£¼ì‹

---

### 4. ğŸ¯ í†µí•© ì¶”ì²œ (Combined Recommendation)
**íŒŒì¼**: `app/services/stock_recommendation_service.py` â†’ `get_combined_recommendations_with_technical_and_sentiment()`

#### í†µí•© ë°©ë²•
```
AI ì˜ˆì¸¡ (Accuracy â‰¥ 80%, Rise â‰¥ 3%)
    âˆ©
ê¸°ìˆ ì  ì§€í‘œ (ê³¨ë“ í¬ë¡œìŠ¤ OR RSI<50 OR MACDë§¤ìˆ˜)
    âˆ©
ê°ì • ë¶„ì„ (Score â‰¥ 0.15 OR ê°•ë ¥í•œ ê¸°ìˆ  ì‹ í˜¸)
    â†“
ìµœì¢… ë§¤ìˆ˜ ì¶”ì²œ
```

#### ì¢…í•© ì ìˆ˜ ê³„ì‚°
```python
composite_score = (
    0.3 Ã— rise_probability +      # 30%: AI ì˜ˆì¸¡ ìƒìŠ¹ë¥ 
    0.4 Ã— tech_signal_score +     # 40%: ê¸°ìˆ ì  ì§€í‘œ ì ìˆ˜
    0.3 Ã— sentiment_score         # 30%: ê°ì • ë¶„ì„ ì ìˆ˜
)
```

#### ìµœì¢… ë§¤ìˆ˜ ì¡°ê±´
1. **ì¡°ê±´ 1**: ê°ì • ì ìˆ˜ â‰¥ 0.15 **AND** ê¸°ìˆ ì  ì‹ í˜¸ 2ê°œ ì´ìƒ
2. **ì¡°ê±´ 2**: ê¸°ìˆ ì  ì‹ í˜¸ 3ê°œ ëª¨ë‘ (ê°ì • ë¬´ê´€)

---

## ğŸ”„ ì „ì²´ ì‹œìŠ¤í…œ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  ë°ì´í„° ìˆ˜ì§‘ (Scheduler - ìë™ ì‹¤í–‰)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ ë§¤ì¼ 08:00 (ET): ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„
    â”‚   â””â”€ generate_technical_recommendations()
    â”‚
    â”œâ”€ 3ì¼ë§ˆë‹¤ 09:00 (ET): ê°ì • ë¶„ì„
    â”‚   â””â”€ fetch_and_store_sentiment_for_recommendations()
    â”‚
    â””â”€ ì£¼ 1íšŒ (ìˆ˜ë™): AI ì˜ˆì¸¡ ëª¨ë¸ í•™ìŠµ
        â””â”€ predict.py ì‹¤í–‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£  í†µí•© ì¶”ì²œ ìƒì„± (Scheduler - ìë™ ì‹¤í–‰)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€ ë§¤ì¼ 20:00 (ET): í†µí•© ë¶„ì„ ë° ì¶”ì²œ
        â””â”€ get_combined_recommendations_with_technical_and_sentiment()
        â””â”€ Slack ì•Œë¦¼ ë°œì†¡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£  ìë™ ë§¤ìˆ˜ ì‹¤í–‰ (Scheduler - ìë™ ì‹¤í–‰)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€ ë§¤ì¼ 21:00 (ET): ì¶”ì²œ ì¢…ëª© ìë™ ë§¤ìˆ˜
        â””â”€ execute_auto_buy_with_combined_recommendations()
        â””â”€ ìƒìœ„ 5ê°œ ì¢…ëª© ë§¤ìˆ˜ (ê° 15ë§Œì›)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£  ìë™ ë§¤ë„ ì‹¤í–‰ (Scheduler - ìë™ ì‹¤í–‰)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€ ë§¤ì¼ 22:00 (ET): ë³´ìœ  ì¢…ëª© ë§¤ë„ íŒë‹¨
        â””â”€ execute_auto_sell()
        â””â”€ ìµì ˆ(+5%) / ì†ì ˆ(-7%) / ê¸°ìˆ +ê°ì • ì‹ í˜¸
```

---

## ğŸ“ ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
stock-trading/
â”œâ”€â”€ predict.py                           # AI ì˜ˆì¸¡ ëª¨ë¸ (ìˆ˜ë™ ì‹¤í–‰)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ stock_recommendation_service.py   # â­ ëª¨ë“  ì¶”ì²œ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ auto_trading_service.py           # ìë™ ë§¤ë§¤ ì‹¤í–‰
â”‚   â”‚   â””â”€â”€ balance_service.py                # ì”ê³ /ë³´ìœ  ì¡°íšŒ
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ scheduler.py                      # â­ ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
â”‚   â”‚   â””â”€â”€ slack_notifier.py                 # Slack ì•Œë¦¼
â”‚   â””â”€â”€ api/routes/
â”‚       â””â”€â”€ stock_recommendations.py          # API ì—”ë“œí¬ì¸íŠ¸
â””â”€â”€ documents/
    â”œâ”€â”€ ë§¤ìˆ˜_ë™ì‘_ê°€ì´ë“œ.md                   # ìë™ ë§¤ë§¤ ìƒì„¸ ê°€ì´ë“œ
    â”œâ”€â”€ ìŠ¤ì¼€ì¤„ëŸ¬_ê°€ì´ë“œ.md                    # ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ ê°€ì´ë“œ
    â”œâ”€â”€ ì£¼ì‹ì˜ˆì¸¡ëª¨ë¸_ê°€ì´ë“œ.md                # AI ëª¨ë¸ ìƒì„¸ ì„¤ëª…
    â”œâ”€â”€ í†µí•©ì¶”ì²œì‹œìŠ¤í…œ_ê°€ì´ë“œ.md              # í†µí•© ì¶”ì²œ í•¨ìˆ˜ ì„¤ëª…
    â””â”€â”€ queries/
        â””â”€â”€ README.md                        # SQL ì¿¼ë¦¬ ì˜ˆì‹œ
```

---

## ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”

### ì…ë ¥ í…Œì´ë¸”
| í…Œì´ë¸”ëª… | ì„¤ëª… | ê°±ì‹  ì£¼ê¸° |
|---------|------|----------|
| `economic_and_stock_data` | ê²½ì œ ì§€í‘œ + ì£¼ê°€ ì›ë³¸ ë°ì´í„° | ë§¤ì¼ (ì™¸ë¶€ ìˆ˜ì§‘) |
| `stock_ticker_mapping` | ì£¼ì‹ëª… â†” í‹°ì»¤ ë§¤í•‘ | ì •ì  |

### ë¶„ì„ ê²°ê³¼ í…Œì´ë¸”
| í…Œì´ë¸”ëª… | ì„¤ëª… | ìƒì„± í•¨ìˆ˜ |
|---------|------|----------|
| `stock_recommendations` | ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„ ê²°ê³¼ | `generate_technical_recommendations()` |
| `predicted_stocks` | AI ì˜ˆì¸¡ ê°€ê²© (ë‚ ì§œë³„) | `predict.py` |
| `stock_analysis_results` | AI ì˜ˆì¸¡ ë¶„ì„ ê²°ê³¼ | `predict.py` |
| `ticker_sentiment_analysis` | ê°ì • ë¶„ì„ ê²°ê³¼ | `fetch_and_store_sentiment_for_recommendations()` |

### ê±°ë˜ ê¸°ë¡ í…Œì´ë¸”
| í…Œì´ë¸”ëª… | ì„¤ëª… | ìƒì„± ì‹œì  |
|---------|------|----------|
| `auto_trading_logs` | ìë™ ë§¤ë§¤ ì‹¤í–‰ ë¡œê·¸ | ë§¤ìˆ˜/ë§¤ë„ ì‹¤í–‰ ì‹œ |

---

## ğŸ“Š API ì—”ë“œí¬ì¸íŠ¸

### ì¶”ì²œ ì¡°íšŒ API
```bash
# 1. ê¸°ìˆ ì  ì§€í‘œë§Œ
GET /api/stock-recommendations/technical

# 2. AI ì˜ˆì¸¡ë§Œ
GET /api/stock-recommendations/ai-predictions

# 3. ê°ì • ë¶„ì„ í¬í•¨ (AI + ê°ì •)
GET /api/stock-recommendations/with-sentiment

# 4. í†µí•© ì¶”ì²œ (ê¸°ìˆ  + AI + ê°ì •) â­
GET /api/stock-recommendations/combined

# 5. ë§¤ë„ ëŒ€ìƒ ì¡°íšŒ
GET /api/stock-recommendations/stocks-to-sell
```

### ë¶„ì„ ì‹¤í–‰ API
```bash
# ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„ ì‹¤í–‰
POST /api/stock-recommendations/analyze-technical

# ê°ì • ë¶„ì„ ì‹¤í–‰
POST /api/stock-recommendations/analyze-sentiment
```

---

## ğŸ”” Slack ì•Œë¦¼ ì‹œìŠ¤í…œ

### ì•Œë¦¼ íƒ€ì…
1. **ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„ ì™„ë£Œ** (ë§¤ì¼ 08:00)
   - ë¶„ì„ ì¢…ëª© ìˆ˜
   - ì¶”ì²œ ì¢…ëª© ëª©ë¡ (ìƒìœ„ 5ê°œ)

2. **ê°ì • ë¶„ì„ ì™„ë£Œ** (3ì¼ë§ˆë‹¤ 09:00)
   - ë¶„ì„ í‹°ì»¤ ìˆ˜
   - ê¸ì •/ë¶€ì • ì¢…ëª© ìˆ˜

3. **í†µí•© ì¶”ì²œ ë¶„ì„ ì™„ë£Œ** (ë§¤ì¼ 20:00) â­
   - 4ê°€ì§€ ë¶„ì„ í†µê³„
   - ìµœì¢… ì¶”ì²œ ì¢…ëª© (ìƒìœ„ 5ê°œ)
   - ì¢…í•© ì ìˆ˜ ë° ìƒì„¸ ì •ë³´

4. **ìë™ ë§¤ìˆ˜ ì‹¤í–‰** (ë§¤ì¼ 21:00)
   - ë§¤ìˆ˜ ì¢…ëª© ë° ìˆ˜ëŸ‰
   - ë§¤ìˆ˜ ê°€ê²© ë° ì´ì•¡

5. **ìë™ ë§¤ë„ ì‹¤í–‰** (ë§¤ì¼ 22:00)
   - ë§¤ë„ ì¢…ëª© ë° ìˆ˜ìµë¥ 
   - ë§¤ë„ ì‚¬ìœ  (ìµì ˆ/ì†ì ˆ/ì‹ í˜¸)

---

## âš™ï¸ ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •

### ìë™ ì‹¤í–‰ ìŠ¤ì¼€ì¤„
| ì‹œê°„ (ET) | ì‘ì—… | í•¨ìˆ˜ |
|-----------|-----|------|
| 08:00 | ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„ | `analyze_technical_indicators()` |
| 09:00 (3ì¼ë§ˆë‹¤) | ê°ì • ë¶„ì„ | `analyze_sentiment_data()` |
| 20:00 | í†µí•© ì¶”ì²œ ë¶„ì„ | `analyze_combined_recommendations()` |
| 21:00 | ìë™ ë§¤ìˆ˜ ì‹¤í–‰ | `execute_auto_buy_job()` |
| 22:00 | ìë™ ë§¤ë„ ì‹¤í–‰ | `execute_auto_sell_job()` |

### ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘
```bash
# ì„œë²„ ì‹œì‘ (ìŠ¤ì¼€ì¤„ëŸ¬ ìë™ ì‹œì‘)
uvicorn app.main:app --reload

# ë˜ëŠ” Dockerë¡œ ì‹¤í–‰
docker-compose up -d
```

---

## ğŸ¯ ë§¤ìˆ˜/ë§¤ë„ ì¡°ê±´ ìš”ì•½

### ë§¤ìˆ˜ ì¡°ê±´ (í†µí•© ì¶”ì²œ)
âœ… **ì¡°ê±´ 1**: ê°ì • ì ìˆ˜ â‰¥ 0.15 **AND** ê¸°ìˆ  ì‹ í˜¸ 2ê°œ ì´ìƒ
âœ… **ì¡°ê±´ 2**: ê¸°ìˆ  ì‹ í˜¸ 3ê°œ ëª¨ë‘ (ê³¨ë“ í¬ë¡œìŠ¤ + RSI<50 + MACDë§¤ìˆ˜)

**ì¶”ê°€ í•„í„°**:
- AI ì˜ˆì¸¡ ì •í™•ë„ â‰¥ 80%
- AI ì˜ˆì¸¡ ìƒìŠ¹ë¥  â‰¥ 3%
- ì¢…í•© ì ìˆ˜ ë†’ì€ ìˆœìœ¼ë¡œ ìƒìœ„ 5ê°œ ë§¤ìˆ˜

### ë§¤ë„ ì¡°ê±´
âŒ **ì¡°ê±´ 1**: ìµì ˆ - êµ¬ë§¤ê°€ ëŒ€ë¹„ **+5% ì´ìƒ**
âŒ **ì¡°ê±´ 2**: ì†ì ˆ - êµ¬ë§¤ê°€ ëŒ€ë¹„ **-7% ì´í•˜**
âŒ **ì¡°ê±´ 3**: ê°ì • ì ìˆ˜ < -0.15 **AND** ê¸°ìˆ  ë§¤ë„ ì‹ í˜¸ 2ê°œ ì´ìƒ
âŒ **ì¡°ê±´ 4**: ê¸°ìˆ  ë§¤ë„ ì‹ í˜¸ 3ê°œ (ë°ë“œí¬ë¡œìŠ¤ + RSI>70 + MACDë§¤ë„)

---

## ğŸ“ˆ ì‹¤ì „ ì‚¬ìš© ì˜ˆì‹œ

### 1. ì‹œìŠ¤í…œ ì´ˆê¸° ì„¤ì •
```bash
# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env íŒŒì¼)
KIS_APP_KEY=your_app_key
KIS_APP_SECRET=your_app_secret
ALPHA_VANTAGE_API_KEY=your_api_key
SLACK_WEBHOOK_URL=your_webhook_url

# 2. ì„œë²„ ì‹œì‘
uvicorn app.main:app --reload

# 3. AI ëª¨ë¸ í•™ìŠµ (ìµœì´ˆ 1íšŒ)
python predict.py
```

### 2. ìˆ˜ë™ìœ¼ë¡œ ì¶”ì²œ í™•ì¸
```python
from app.services.stock_recommendation_service import StockRecommendationService

service = StockRecommendationService()

# í†µí•© ì¶”ì²œ ì¡°íšŒ
result = service.get_combined_recommendations_with_technical_and_sentiment()

for stock in result['results'][:5]:
    print(f"{stock['stock_name']}: {stock['composite_score']:.2f}ì ")
```

### 3. APIë¡œ ì¶”ì²œ í™•ì¸
```bash
# í†µí•© ì¶”ì²œ ì¡°íšŒ
curl http://localhost:8000/api/stock-recommendations/combined

# ë§¤ë„ ëŒ€ìƒ ì¡°íšŒ
curl http://localhost:8000/api/stock-recommendations/stocks-to-sell
```

---

## ğŸ’¡ ìµœì í™” íŒ

### 1. ë§¤ìˆ˜ ì¡°ê±´ ì™„í™” (ë” ë§ì€ ì¶”ì²œ)
```python
# stock_recommendation_service.py ìˆ˜ì •
if sentiment_score >= 0.10:  # 0.15 â†’ 0.10
    if tech_conditions >= 1:  # 2 â†’ 1
        final_results.append(item)
```

### 2. ë§¤ìˆ˜ ì¡°ê±´ ê°•í™” (ë” ì‹ ë¢°ë„ ë†’ì€ ì¶”ì²œ)
```python
if sentiment_score >= 0.20:  # 0.15 â†’ 0.20
    if tech_conditions >= 3:  # 2 â†’ 3 (ëª¨ë“  ì¡°ê±´)
        final_results.append(item)
```

### 3. ë§¤ìˆ˜ ê¸ˆì•¡ ì¡°ì •
```python
# auto_trading_service.py ìˆ˜ì •
investment_per_stock = 200000  # 15ë§Œì› â†’ 20ë§Œì›
max_stocks_to_buy = 10  # 5ê°œ â†’ 10ê°œ
```

### 4. ì†ìµ ê¸°ì¤€ ë³€ê²½
```python
# stock_recommendation_service.py - get_stocks_to_sell()
if price_change_percent >= 7:  # ìµì ˆ: +5% â†’ +7%
    sell_reasons.append("ìµì ˆ ì¡°ê±´ ì¶©ì¡±")
elif price_change_percent <= -5:  # ì†ì ˆ: -7% â†’ -5%
    sell_reasons.append("ì†ì ˆ ì¡°ê±´ ì¶©ì¡±")
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ë°ì´í„° ìµœì‹ ì„±
- ê¸°ìˆ ì  ì§€í‘œ: ë§¤ì¼ ê°±ì‹  í•„ìˆ˜
- ê°ì • ë¶„ì„: 3ì¼ë§ˆë‹¤ ê°±ì‹  ê¶Œì¥
- AI ì˜ˆì¸¡: ì£¼ 1íšŒ ì¬í•™ìŠµ ê¶Œì¥

### 2. API ì œí•œ
- Alpha Vantage: ë¬´ë£Œ ê³„ì • 500 calls/day
- í•œêµ­íˆ¬ìì¦ê¶Œ: ì´ˆë‹¹ 20ê±´ ì œí•œ

### 3. ë¦¬ìŠ¤í¬ ê´€ë¦¬
- í•œ ì¢…ëª©ì— ì „ì²´ ìê¸ˆì˜ 10% ì´ìƒ íˆ¬ì ì§€ì–‘
- ì†ì ˆë§¤ ì„¤ì • í•„ìˆ˜ (-7%)
- ê¸‰ê²©í•œ ì‹œì¥ ë³€ë™ ì‹œ ìë™ ë§¤ë§¤ ì¤‘ë‹¨ ê³ ë ¤

### 4. ë°±í…ŒìŠ¤íŒ…
- ì‹¤ì „ íˆ¬ì ì „ ê³¼ê±° ë°ì´í„°ë¡œ ì „ëµ ê²€ì¦
- ìµœì†Œ 3ê°œì›” ~ 6ê°œì›” ë°±í…ŒìŠ¤íŒ… ê¶Œì¥

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- **[ë§¤ìˆ˜_ë™ì‘_ê°€ì´ë“œ.md](./ë§¤ìˆ˜_ë™ì‘_ê°€ì´ë“œ.md)**: ìë™ ë§¤ë§¤ ì‹œìŠ¤í…œ ìƒì„¸ ì„¤ëª…
- **[ìŠ¤ì¼€ì¤„ëŸ¬_ê°€ì´ë“œ.md](./ìŠ¤ì¼€ì¤„ëŸ¬_ê°€ì´ë“œ.md)**: ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì • ë° ì‹¤í–‰
- **[ì£¼ì‹ì˜ˆì¸¡ëª¨ë¸_ê°€ì´ë“œ.md](./ì£¼ì‹ì˜ˆì¸¡ëª¨ë¸_ê°€ì´ë“œ.md)**: AI ì˜ˆì¸¡ ëª¨ë¸ ìƒì„¸ ì„¤ëª…
- **[í†µí•©ì¶”ì²œì‹œìŠ¤í…œ_ê°€ì´ë“œ.md](./í†µí•©ì¶”ì²œì‹œìŠ¤í…œ_ê°€ì´ë“œ.md)**: í†µí•© ì¶”ì²œ í•¨ìˆ˜ ìƒì„¸ ì„¤ëª…

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2024-12-04

